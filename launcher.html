<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¢ BorÃ§lu Sorgulama Sistemi - Launcher</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            max-width: 500px;
            width: 100%;
            text-align: center;
        }
        
        .logo {
            font-size: 48px;
            margin-bottom: 10px;
        }
        
        .title {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #666;
            margin-bottom: 40px;
            font-size: 14px;
        }
        
        .button {
            display: block;
            width: 100%;
            padding: 15px 20px;
            margin: 15px 0;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }
        
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        
        .local-btn {
            background: linear-gradient(45deg, #4CAF50, #45a049);
        }
        
        .internet-btn {
            background: linear-gradient(45deg, #2196F3, #1976D2);
        }
        
        .clean-btn {
            background: linear-gradient(45deg, #f44336, #d32f2f);
        }
        
        .stop-btn {
            background: linear-gradient(45deg, #9E9E9E, #757575);
        }
        
        .status {
            margin-top: 30px;
            padding: 15px;
            border-radius: 10px;
            background: #f5f5f5;
            color: #333;
            font-size: 14px;
        }
        
        .url-box {
            margin-top: 15px;
            padding: 10px;
            background: #e3f2fd;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            word-break: break-all;
            color: #1976d2;
        }
        
        .footer {
            margin-top: 30px;
            font-size: 12px;
            color: #999;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">ğŸ¢</div>
        <div class="title">BORÃ‡LU SORGULAMA SÄ°STEMÄ°</div>
        <div class="subtitle">Modern ve gÃ¼venli borÃ§lu takip sistemi</div>
        
        <button class="button local-btn" onclick="startLocal()">
            ğŸ  YEREL BAÅLAT (WiFi AÄŸÄ±)
        </button>
        
        <button class="button internet-btn" onclick="startInternet()">
            ğŸŒ Ä°NTERNET BAÅLAT (Ngrok)
        </button>
        
        <button class="button clean-btn" onclick="cleanDatabase()">
            ğŸ—‘ï¸ VERÄ°TABANI TEMÄ°ZLE
        </button>
        
        <button class="button stop-btn" onclick="stopSystem()">
            â¹ï¸ SÄ°STEMÄ° DURDUR
        </button>
        
        <div class="status" id="status">
            Sistem hazÄ±r - Bir iÅŸlem seÃ§in
        </div>
        
        <div class="url-box" id="urlBox" style="display: none;">
            URL burada gÃ¶rÃ¼necek...
        </div>
        
        <div class="footer">
            Docker + Next.js + Ngrok ile gÃ¼Ã§lendirilmiÅŸtir
        </div>
    </div>

    <script>
        function updateStatus(message, color = '#333') {
            const status = document.getElementById('status');
            status.textContent = message;
            status.style.color = color;
        }
        
        function showUrl(url) {
            const urlBox = document.getElementById('urlBox');
            urlBox.textContent = url;
            urlBox.style.display = 'block';
        }
        
        function hideUrl() {
            document.getElementById('urlBox').style.display = 'none';
        }
        
        function runCommand(command) {
            // Windows'ta .bat dosyasÄ±nÄ± Ã§alÄ±ÅŸtÄ±r
            const projectPath = getProjectPath();
            const fullCommand = `cd /d "${projectPath}" && ${command}`;
            
            // Yeni CMD penceresi aÃ§
            window.open(`cmd://c/${fullCommand}`, '_blank');
        }
        
        function getProjectPath() {
            // HTML dosyasÄ±nÄ±n bulunduÄŸu dizin = proje dizini
            return window.location.pathname.substring(0, window.location.pathname.lastIndexOf('/'));
        }
        
        function startLocal() {
            updateStatus('ğŸš€ Yerel sistem baÅŸlatÄ±lÄ±yor...', '#ff9800');
            hideUrl();
            
            // Proje dizinini otomatik tespit et (HTML dosyasÄ±nÄ±n bulunduÄŸu dizin)
            const currentPath = window.location.pathname;
            const projectPath = currentPath.substring(1, currentPath.lastIndexOf('/')).replace(/\//g, '\\');
            
            // BASIT-LAUNCHER.bat'i seÃ§enek 1 ile Ã§alÄ±ÅŸtÄ±r
            const batCommand = `cmd /c "cd /d "${projectPath}" && echo 1 | BASIT-LAUNCHER.bat"`;
            
            try {
                // Windows'ta ActiveX kullanarak komut Ã§alÄ±ÅŸtÄ±r
                const shell = new ActiveXObject("WScript.Shell");
                shell.Run(batCommand, 1, false);
                
                setTimeout(() => {
                    updateStatus('âœ… Yerel sistem Ã§alÄ±ÅŸÄ±yor!', '#4caf50');
                    showUrl('ğŸ  http://localhost:3000 | ğŸ“¶ http://192.168.0.17:3000');
                    
                    // TarayÄ±cÄ±da localhost'u aÃ§
                    setTimeout(() => {
                        window.open('http://localhost:3000', '_blank');
                    }, 2000);
                }, 3000);
            } catch (e) {
                // ActiveX Ã§alÄ±ÅŸmazsa alternatif yÃ¶ntem
                updateStatus('âš ï¸ Otomatik baÅŸlatma desteklenmiyor. Manuel baÅŸlatma...', '#ff9800');
                
                // KullanÄ±cÄ±ya talimat ver
                const instructions = `
LÃ¼tfen ÅŸu adÄ±mlarÄ± takip edin:
1. Dosya Gezgini'ni aÃ§Ä±n
2. Bu klasÃ¶re gidin: ${projectPath}
3. BASIT-LAUNCHER.bat dosyasÄ±na Ã§ift tÄ±klayÄ±n
4. AÃ§Ä±lan menÃ¼de "1" tuÅŸuna basÄ±n
                `;
                
                if (confirm('Otomatik baÅŸlatma Ã§alÄ±ÅŸmadÄ±.\\n\\nManuel baÅŸlatma talimatlarÄ±nÄ± gÃ¶rmek ister misiniz?')) {
                    alert(instructions);
                }
                
                updateStatus('ğŸ“‹ Manuel baÅŸlatma talimatlarÄ± gÃ¶sterildi', '#2196f3');
            }
        }
        
        function startInternet() {
            updateStatus('ğŸŒ Internet eriÅŸimi baÅŸlatÄ±lÄ±yor...', '#ff9800');
            hideUrl();
            
            // Proje dizinini otomatik tespit et
            const currentPath = window.location.pathname;
            const projectPath = currentPath.substring(1, currentPath.lastIndexOf('/')).replace(/\//g, '\\');
            
            // BASIT-LAUNCHER.bat'i seÃ§enek 2 ile Ã§alÄ±ÅŸtÄ±r
            const batCommand = `cmd /c "cd /d "${projectPath}" && echo 2 | BASIT-LAUNCHER.bat"`;
            
            try {
                const shell = new ActiveXObject("WScript.Shell");
                shell.Run(batCommand, 1, false);
                
                setTimeout(() => {
                    updateStatus('âœ… Internet eriÅŸimi aktif! Ngrok penceresindeki URL\'i kopyalayÄ±n', '#4caf50');
                    showUrl('ğŸŒ Ngrok penceresindeki https://xxxxx.ngrok.io URL\'ini kopyalayÄ±n ve paylaÅŸÄ±n');
                }, 5000);
            } catch (e) {
                updateStatus('âš ï¸ Otomatik baÅŸlatma desteklenmiyor. Manuel baÅŸlatma...', '#ff9800');
                
                const instructions = `
LÃ¼tfen ÅŸu adÄ±mlarÄ± takip edin:
1. Dosya Gezgini'ni aÃ§Ä±n
2. Bu klasÃ¶re gidin: ${projectPath}
3. BASIT-LAUNCHER.bat dosyasÄ±na Ã§ift tÄ±klayÄ±n
4. AÃ§Ä±lan menÃ¼de "2" tuÅŸuna basÄ±n
5. Ngrok penceresindeki URL'i kopyalayÄ±n
                `;
                
                if (confirm('Otomatik baÅŸlatma Ã§alÄ±ÅŸmadÄ±.\\n\\nManuel baÅŸlatma talimatlarÄ±nÄ± gÃ¶rmek ister misiniz?')) {
                    alert(instructions);
                }
                
                updateStatus('ğŸ“‹ Manuel baÅŸlatma talimatlarÄ± gÃ¶sterildi', '#2196f3');
            }
        }
        
        function cleanDatabase() {
            if (confirm('TÃœM veritabanÄ± verileri silinecek!\\nBu iÅŸlem geri alÄ±namaz.\\n\\nDevam etmek istiyor musunuz?')) {
                updateStatus('ğŸ—‘ï¸ VeritabanÄ± temizleniyor...', '#ff9800');
                hideUrl();
                
                const projectPath = 'C:\\Users\\Obuzhukuk\\Desktop\\BORCLUSORGU\\borclu-sorgulama';
                const psCommand = `powershell -Command "Set-Location '${projectPath}'; Start-Process cmd -ArgumentList '/k', 'docker-compose down && docker volume rm borclu-sorgulama_borclu-db-data 2>nul && docker-compose up -d && echo Veritabani temizlendi! && pause'"`;
                
                try {
                    const shell = new ActiveXObject("WScript.Shell");
                    shell.Run(psCommand, 1, false);
                    
                    setTimeout(() => {
                        updateStatus('âœ… VeritabanÄ± temizlendi ve sistem yeniden baÅŸlatÄ±ldÄ±!', '#4caf50');
                    }, 8000);
                } catch (e) {
                    updateStatus('âŒ Temizlenemedi! Manuel olarak VERITABANI-TEMIZLE.bat Ã§alÄ±ÅŸtÄ±rÄ±n', '#f44336');
                }
            }
        }
        
        function stopSystem() {
            updateStatus('â¹ï¸ Sistem durduruluyor...', '#ff9800');
            hideUrl();
            
            // Proje dizinini otomatik tespit et
            const currentPath = window.location.pathname;
            const projectPath = currentPath.substring(1, currentPath.lastIndexOf('/')).replace(/\//g, '\\');
            
            // BASIT-LAUNCHER.bat'i seÃ§enek 3 ile Ã§alÄ±ÅŸtÄ±r
            const batCommand = `cmd /c "cd /d "${projectPath}" && echo 3 | BASIT-LAUNCHER.bat"`;
            
            try {
                const shell = new ActiveXObject("WScript.Shell");
                shell.Run(batCommand, 1, false);
                
                setTimeout(() => {
                    updateStatus('â¹ï¸ Sistem durduruldu', '#757575');
                }, 3000);
            } catch (e) {
                updateStatus('âš ï¸ Otomatik durdurma desteklenmiyor. Manuel durdurma...', '#ff9800');
                
                const instructions = `
LÃ¼tfen ÅŸu adÄ±mlarÄ± takip edin:
1. Dosya Gezgini'ni aÃ§Ä±n
2. Bu klasÃ¶re gidin: ${projectPath}
3. BASIT-LAUNCHER.bat dosyasÄ±na Ã§ift tÄ±klayÄ±n
4. AÃ§Ä±lan menÃ¼de "3" tuÅŸuna basÄ±n
                `;
                
                if (confirm('Otomatik durdurma Ã§alÄ±ÅŸmadÄ±.\\n\\nManuel durdurma talimatlarÄ±nÄ± gÃ¶rmek ister misiniz?')) {
                    alert(instructions);
                }
                
                updateStatus('ğŸ“‹ Manuel durdurma talimatlarÄ± gÃ¶sterildi', '#2196f3');
            }
        }
        
        // Sayfa yÃ¼klendiÄŸinde
        window.onload = function() {
            updateStatus('Sistem hazÄ±r - Bir iÅŸlem seÃ§in', '#4caf50');
        }
    </script>
</body>
</html>